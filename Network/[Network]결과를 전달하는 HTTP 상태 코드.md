# 4. 결과를 전달하는 HTTP 상태 코드

클라이언트가 HTTP 리퀘스트를 보낸 결과, 즉 서버가 정상적으로 처리되었는지 아니면 에러가 발생했는지를 알려주는게 HTTP 상태 코드 입니다. 

상태코드의 예를 들면 200 OK와 같이 3자리 숫자와 설명으로 나타냅니다. 숫자의 첫 번째 자리는 리스폰스의 클래스를 의미하는데 나머지 2자리는 분류가 없습니다. 이 리스폰스 클래스는 다음과 같이 5개가 정의되어 있습니다.

|      | 클래스        | 설명                                        |
| ---- | ------------- | ------------------------------------------- |
| 1xx  | Informational | 리퀘스트를 받아들여 처리중                  |
| 2xx  | Success       | 리퀘스트를 정상적으로 처리했음              |
| 3xx  | Redirection   | 리퀘스트를 완료하기 위해서 추가 동작이 필요 |
| 4xx  | Client Error  | 서버는 리퀘스트 이해 불가능                 |
| 5xx  | Server Error  | 서버는 리퀘스트 처리 실패                   |

주로 사용되고 있는 상태코드는 아래 14개 정도 있습니다.

## 1. 2xx 성공(Success)

### 1) 200OK

클라이언트가 보낸 리퀘스트를 서버가 정상 처리하였음을 나타냅니다. 리스폰스에서 상태 코드와 함께 되돌아 오는 정보는 메소드에 따라 다릅니다. 예를 들어, GET 메소드의 경우 리퀘스트된 리소스에 대응하는 엔티티가 리스폰스로 보내지고 HEAD 메소드의 경우에는 리퀘스트된 리소스에 대응하는 엔티티 헤더 필드가 메시지 바디를 동반하지 않고 리스폰스로 되돌아옵니다.

### 2) 204 No Content

서버가 리퀘스트를 받아서 처리하는 데는 성공했지만 리스폰스에 엔티티 바디를 포함하지 않습니다. 이것은 클라이언트에서 서버에 정보를 보내는 것으로 족하고, 클라이언트에 대해서 새로운 정보를 보낼 필요가 없는 경우에 사용됩니다.

### 3) 206 Partial Content

Range에 의해서 범위가 지정된 리퀘스트에 의해서 서버가 부분적으로 GET리퀘스트를 받았음을 나타냅니다. 리스폰스에는 Content-Range로 지정된 범위의 엔티티가 포함되게 됩니다.

## 2. 3xx 리다이렉트(Redirection)

### 1) 301 Moved Permanently

리퀘스트된 리소스에는 새로운 URI가 부여되어 있기 때문에 이후로는 그 리소스를 참조하는 URI를 사용해야 한다는 것을 나타내고 있습니다. 결국 북마크하고 있는 경우에는 Location 헤더 필드에서 가리키고 있는 URI에 북마크를 다시 하는게 좋다는 것을 나타내고 있습니다.

301이 발생하는 상황으로는 아래의 리퀘스트와 같이 디렉토리를 지정했을 때 마지막 부분에 슬래시(/)를 붙이는 것일 잊은 경우 등이 있습니다.

```http
http://example.com/sample
```

### 2) 302 Found

리퀘스트된 리소스에는 새로운 URI가 할당되어 있기 때문에 그 URI를 참조해 주길 바란다는 의미를 나타냅니다. 301 Moved Permanently와 비슷하지만 302의 경우에는 영구적인 이동이 아닌 어디까지나 일시적인 것입니다. 결국, 이동하는 곳의 URI는 앞으로 이동될 가능성이 있습니다.

### 3) 303 See other

리퀘스트에 대한 리소스는 다른 URI에 있기 때문에 GET 메소드를 사용해서 얻어야 한다는 것을 나타내고 있습니다. 이것은 302 Found와 같은 기능이지만, 리다이렉트 장소를 GET 메소드로 얻어야 한다고 명확하게 되어 있는 점이 302와 다릅니다. 

301, 302, 303 리스폰스 코드가 되돌아 오면, 대부분의 브라우저에서는 POST를 GET으로 바꾸어서 리퀘스트의 엔티티 바디를 삭제하고 리퀘스트를 자동적으로 재송신하게 되어 있습니다.

301, 302dml tkdiddms POST 메소드를 GET 메소드로 바꾸는 것을 금지하고 있지만 구현해 놓은 것을 보면 이렇게 되어 있는 것이 대부분 입니다.

### 4) 304 Not Modified

클라이언트가 조건부 리퀘스트를 했을 때 리소스에 대한 액세스는 허락하지만 조건이 충족되지 않음을 표시하고 있습니다. 304를 되돌려 줄 경우에는 리스폰스 바디에 어떤 것도 포함되어 있어서는 안됩니다. 304는 3xx에 분류되어 있지만 리다이렉트와는 관계가 없습니다.

### 5) 307 Temporary Redirect

이 리스폰스는 302 Found와 같은 의미를 지니지만, 302의 경우에는 POST로부터 GET으로 치환이 금지되어 있는데도 불구하고 구현상 그와 같이 되어 있지는 않습니다.

307에서는 브라우저 사양에 따라 POST에서 GET으로 치환을 하지 않습니다. 단지, 브라우저마다 리스폰스를 처리하는 동작이 다를 경우가 있습니다.

## 3. 4xx 클라이언트 에러(Client Error)

### 1) 400 Bad Request

리퀘스트 구문이 잘못되었음을 나타내고 있습니다. 이 에러가 발생한 경우, 리퀘스트 내용을 재검토하고 나서 재송신할 필요가 있습니다.

### 2) 401 Unauthorized

송신한 리퀘스트에 HTTP 인증(Basic 인증, DIGEST 인증) 정보가 필요하다는 것을 나타내고 있습니다. 이미 한 번 리퀘스트가 이루어진 경우에는 유저 인증에 실패했음을 표시합니다. 

401을 포함한 리스폰스를 되돌리는 경우에는 리퀘스트 된 리소스에 적용되는 challenge를 포함한 WWW-Authenticate 헤더 필드를 포함할 필요가 있습니다. 브라우저에서 처음 401 리스폰스를 받는 경우에는 인증을 위한 다이얼로그가 표시됩니다.

### 3) 403 Forbidden

리퀘스트된 리소스의 액세스가 거부되었음을 나타내고 있습니다. 서버 측은 거부의 이유를 분명히 할 필요가 있는데, 이유를 명확하게 하는 경우에는 엔티티 바디에 기재해서 유저 측에 표시합니다.

403이 발생한 원인으로는 파일 시스템의 퍼미션이 부여되지 않은 경우와 액세스 권한의 문제(허가되지 않은 송신 IP 주소의 액세스 등)가 있는 것을 예로 들 수 있습니다.

### 4) 404 Not Found

리퀘스트한 리소스가 서버상에 없다는 것을 나타내고 있습니다. 그 외에도 서버 측에 해당 리퀘스트를 거부하고 싶은 이유를 분명히 하고 싶지 않은 경우에도 이용할 수 있습니다.

## 4. 5xx 서버 에러(Server Error)

### 1) 500 Internal Server Error

이 리스폰스는 서버에서 리퀘스트를 처리하는 도중에 에러가 발생하였음을 나타내고 있습니다. 웹 애플리케이션에 에러가 발생한 경우나 일시적인 경우도 있습니다.

### 2) 503 Service Unavailable

일시적으로 서버과 과부화 상태이거나 점검중이기 때문에 현재 리퀘스트를 처리할 수 없음을 나타내고 있습니다. 이 상태가 해소되기까지 시간이 걸리는 경우에는 Retry-After 헤더 필드에 따라 클라이언트에 전달하는 것이 바람직합니다.



Reference [그림으로 배우는 HTTP & Network Basic](http://www.youngjin.com/book/book_detail.asp?prod_cd=9788931447897&seq=5470&cate_cd=1&child_cate_cd=10&goPage=1&orderByCd=1&searchType=Y&keyword1=%B1%D7%B8%B2%C0%B8%B7%CE%20%B9%E8%BF%EC%B4%C2%20http)