# 함수

## 1. 함수와 매개변수

함수를 호출하면서 정보를 전달할 때는 함수 매개변수(argument, parameter)를 이용합니다. 매개변수는 함수가 호출되기 전에는 존재하지 않는다는 점을 제외하면 일반적인 변수나 마찬가지입니다.

```javascript
function avg(a,b){
    return (a+b)/2;
}
```

위 함수 선언에서 ```a```와 ```b```를 정해진 매개변수(formal argument)라고 합니다. 함수가 호출되면 정해진 매개변수는 값을 받아 실제 매개변수(actual argument)가 됩니다.

```javascript
avg(5,10); // 7.5
```

이 예제에서 정해진 매개변수 ```a```와 ```b```는 각각 5와 10을 받아 실제 매개변수가 됩니다. 실제 매개변수는 변수와 매우 비슷하지만 함수 바디 안에서만 존재합니다.

```javascript
const a = 5, b = 10;
avg(a,b);
```

첫 행의 변수 ```a```,```b```는 함수 ```avg```의 매개변수인 ```a```,```b```와 같은 이름이지만 엄연히 다른 변수입니다. 함수를 호출하면 함수 매개변수는 변수 자체가 아니라 그 값을 전달받습니다. 

```javascript
function f(X){
    console.log(`f 내부: x=${x}`);
    x = 5;
    console.log(`f 내부: x=${x}(할당후)`);
}

let x = 3;
console.log(`f를 호출하기 전: x=${x}`);
f(x);
console.log(`f를 호출한 다음: x=${x}`);
```

이 예제를 실행한 결과는 다음과 같습니다.

```javascript
f를 호출하기전: x=3
f 내부: x=3
f 내부: x=5(할당 후)
f를 호출한 다음: x=3
```

함수 안에서 ```x```에 값을 할당하더라도 함수의 바깥의 변수 ```x```에는 아무 영향도 없습니다. 이름은 같지만 둘은 다른 개체입니다.

함수 안에서 매개변수에 값을 할당해도 함수 바깥에 있는 어떤 변수에도 영향이 없습니다. 하지만 함수 안에서 객체 자체를 변경하면, 그 객체는 함수 바깥에서도 바뀐 점이 반영됩니다.

```javascript
function f(o){
    o.message = `f 안에서 수정함 (이전 값: ${o.message})`;
}
let o = {
    message: "초기 값"
};
console.log(`f를 호출하기 전: o.message=${o.message}`);
f(o);
console.log(`f를 호출한 다음: o.message=${o.message}`);
```

함수 ```f```안에서 객체 ```o```를 수정했고, 이렇게 바꾼 내용은 함수 바깥에서도 o에 그대로 반영되어 있음을 알 수 있습니다. 이것이 원시 값과 객체의 핵심적인 차이입니다. 원시 값은 불변이므로 수정할 수 없습니다. 원시 값을 담은 변수는 수정할 수 있지만(다른 값으로 바꿀 수 있지만) 원시 값 자체는 바뀌지 않습니다. 반면 객체는 바뀔 수 있습니다. 함수안의 ```o```와 함수 바깥은 ```o```는 서로 다른 개체입니다. 하지만 그 둘은 같은 객체를 가리키고 있습니다.

```javascript
function f(o){
    o.message = "f에서 수정함";
    o = {
        message: "새로운 객체!"
    };
    console.log(`f 내부: o.message=${o.message}(할당 후)`);
}

let o = {
    message:"초기 값"
};

console.log(`f를 호출하기 전: o.message=${o.message}`);
f(o);
console.log(`f를 호출한 다음: o.message=${o.message}`);
```

이 예제를 실행한 결과는 다음과 같습니다.

```javascript
f를 호출하기 전: o.message="초기값"
f 내부: o.message="새로운 객체!"(할당 후)
f를 호출한 다음: o.message="f에서 수정함"
```

핵심은 함수 내부의 매개변수 ```o```와 함수 바깥의 변수 ```o```가 다르다는 겁니다. ```f```를 호출하면 둘은 같은 객체를 가리키지만, ```f```내부에서 ```o```에 할당한 객체는 새로운, 전혀 다른 객체 입니다. 함수 바깥의 ```o```는 여전히 원래 객체를 가리키고 있습니다.

컴퓨터 과학에서는 자바스크립트의 원시 값을 값 타입(value type)이라고 말합니다. 원시 값을 전달할 때 값이 복사되기 때문입니다. 객체는 참조 타입(reference type)이라 부릅니다. 객체를 전달할 때 두 변수는 같은 객체를 가리키기 때문입니다.

## 2. 함수 표현식과 익명 함수

자바스크립트는 익명 함수(anonymous function)도 지원합니다. 익명 함수에서는 함수에 식별자가 주어지지 않습니다.

식별자가 없는 함수는 함수 표현식을 통한 선언을 하고 호출 할 수 있습니다. 함수 표현식은 함수를 선언하는 한가지 방법일 뿐이며, 그 함수가 익명이 될 수도 있을 뿐입니다. 함수 표현식은 식별자에 할당할 수도 있고 즉시 호출할 수도 있습니다.

함수 표현식은 함수 이름을 생략할 수 있다는 점을 제외하면 함수 선언과 문법적으로 완전히 같습니다. 함수 표현식을 쓰고 그 결과를 변수에 할당하는 예제입니다.

```javascript
const f = function(){
    //...
}
```

먼저 함수 표현식으로 익명 함수를 만들고 그 함수를 변수에 할당했습니다. 익명 함수는 어디든지 쓸 수 있습니다. 다른 함수나 메서드의 매개변수로 넘길 수도 있고, 객체의 함수 프로퍼티가 될 수도 있습니다.

함수안에서 자신을 호출할 때(재귀라고 합니다.)는 함수에 이름을 정하고 다시 변수에 할당하는 방법을 씁니다.

```javascript
const g = function f(stop){
    if(stop) console.log('f stopped');
    f(true);
};
g(false);
```

함수 안에서는 ```f```를 써서 자기 자신을 참조하고, 함수 바깥에서는``` g```를 써서 함수를 호출합니다.

추가적으로 함수 선언식은 호이스팅에 영향을 받지만, 함수 표현식은 호이스팅에 영향을 받지 않습니다.

### 3. 화살표 표기법

화살표 함수에는 세 가지 단축 문법이 있습니다.

- ```function```을 생략해도 됩니다.
- 함수에 매개변수가 단 하나 뿐이라면 괄호(```()```)도 생략할 수 있습니다.
- 함수 바디가 표현식 하나라면 중괄호와 return 문도 생략할 수 있습니다.

화살표 함수는 항상 익명입니다. 화살표 함수도 변수에 할당할 수는 있지만, ```function``` 키워드 처럼 이름 붙은 함수를 만들 수 없습니다.

```javascript
const f1 = function(){ reutrn "hello"; }
// 또는
const f1 = () => "hello!";

const f2 = function(name) { return `Hello, ${name}!`; }
// 또는
const f2 = name => `Hellp, ${name}!`;

const f3 = function(a,b) { return a+b; }
//또는
const f3 = (a,b) => a+b;
```

화살표 함수는 세 가지 특징을 같습니다.

- 생성자로 사용될 수 없습니다. 따라서 ```prototype```속성을 가지고 있지 않습니다. 그리고 스스로의 ```new.targe```t을 가지고 있지 않습니다.
- 스스로의 ```this```, ```arguments```, ```super```를 가지지 않습니다.
- 내부에서 ```yield``` 키워드를 사용할 수 없습니다. 즉, 제너레이터로 사용될 수 없습니다.

추가적으로 화살표 함수 내부에서 ```this```를 사용하면 함수가 정의된 스코프에 있는 ```this```를 가리킵니다. 즉, 화살표 함수 내부의 ```this```는 화살표 함수가 정의된 문맥에 의해 결정됩니다. 

Reference 
[Learning JavaScript](http://www.hanbit.co.kr/store/books/look.php?p_code=B2328850940)
[자바스크립트로 만나는 세상](https://helloworldjavascript.net/pages/220-value-in-depth.html)


